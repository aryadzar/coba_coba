<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
</head>
<body>
    <div id="reader" style="width: 300px;"></div>
    <p>Hasil Scan: <span id="result"></span></p>

    <script>
// Inisialisasi Html5QrcodeScanner
const html5QrCode = new Html5Qrcode("reader");

// Dapatkan daftar kamera yang tersedia
Html5Qrcode.getCameras().then(devices => {
    // Cari kamera yang mengandung "back" atau "rear" di labelnya
    const backCamera = devices.find(device => 
        device.label.toLowerCase().includes('back') || 
        device.label.toLowerCase().includes('rear')
    );

    if (backCamera) {
        // Memulai scanning menggunakan kamera belakang
        html5QrCode.start(
            backCamera.id, 
            {
                fps: 10,    // frame per second
                qrbox: { width: 250, height: 250 }  // ukuran area scan
            },
            qrCodeMessage => {
                // Fungsi callback saat QR code terdeteksi
                console.log(`QR Code detected: ${qrCodeMessage}`);
            },
            errorMessage => {
                // Fungsi callback saat terjadi error
                console.warn(`QR Code scanning error: ${errorMessage}`);
            }
        );
    } else {
        console.error("Kamera belakang tidak ditemukan!");
            }
        }).catch(err => {
            console.error("Error mendapatkan kamera:", err);
        });

      </script>
      
</body>
</html>
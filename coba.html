<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.8/html5-qrcode.min.js" integrity="sha512-r6rDA7W6ZeQhvl8S7yRVQUKVHdexq+GAlNkNNqVC7YyIV+NwqCTJe2hDWCiffTyRNOeGEzRRJ9ifvRm/HCzGYg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script></head>
<body>
    <div id="reader" style="width: 300px; height: 300px;"></div>
    <div id="result"></div>
    <script>
        function startQRScanner() {
            const html5QrCode = new Html5Qrcode("reader");
    
            // Fungsi untuk mendapatkan ID dari kamera belakang
            Html5Qrcode.getCameras().then(devices => {
                if (devices && devices.length) {
                    // Default menggunakan kamera depan
                    let cameraId = devices[0].id;
    
                    // Mencari kamera belakang di perangkat mobile
                    for (let device of devices) {
                        if (device.label.toLowerCase().includes('back')) {
                            cameraId = device.id;  // Pilih kamera belakang
                            break;
                        }
                    }
    
                    // Memulai pemindaian QR code
                    html5QrCode.start(
                        cameraId,
                        {
                            fps: 10, // Frame per detik
                            qrbox: { width: 250, height: 250 } // Ukuran kotak scanning
                        },
                        qrCodeMessage => {
                            // Ketika QR code berhasil discan
                            document.getElementById('result').innerHTML = `QR Code Result: ${qrCodeMessage}`;
                        },
                        { facingMode: { exact: "environment"} },
                        errorMessage => {
                            // Ketika ada error dalam proses scanning
                            console.log(`Error: ${errorMessage}`);
                        }
                    ).catch(err => {
                        // Ketika ada error dalam memulai scanning
                        console.log(`Unable to start scanning: ${err}`);
                    });
                }
            }).catch(err => {
                console.log(`Unable to get cameras: ${err}`);
            });
        }
    
        // Memulai scanner ketika halaman dimuat
        window.onload = function() {
            startQRScanner();
        }
    </script>
    
</body>
</html>
